# =====================================
# Loon å®šåˆ¶é«˜å¯ç”¨é…ç½® V8 æœ€ç»ˆå®Œæ•´ç‰ˆ - ä½œè€…ï¼šGemini AI
# ç‰¹ç‚¹ï¼šé«˜å¯ç”¨ã€App ç‹¬äº«ç­–ç•¥ç»„ã€AI æœåŠ¡ç²¾ç»†åŒ–åˆ†æµã€UI/UX ä¼˜åŒ–
# =====================================

[General]
ip-mode=v4-only
ipv6-vif=off
dns-server=system
sni-sniffing=true
disable-stun=true
dns-reject-mode=LoopbackIP
domain-reject-mode=DNS
udp-fallback-mode=REJECT
wifi-access-http-port=7222
wifi-access-socks5-port=7221
allow-wifi-access=false
interface-mode=auto
test-timeout=5
disconnect-on-policy-change=false
internet-test-url=http://connectivitycheck.platform.hicloud.com/generate_204
proxy-test-url=http://www.gstatic.com/generate_204
geoip-url=https://geodata.kelee.one/Country-Masaiki.mmdb
ipasn-url=https://geodata.kelee.one/GeoLite2-ASN-P3TERX.mmdb
skip-proxy=192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, e.crashlynatics.com
bypass-tun=10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32


[Proxy]

# =====================================
# ğŸŸ¢ èŠ‚ç‚¹è®¢é˜… [Remote Proxy] ğŸŸ¢
# âš ï¸ åŠ¡å¿…æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„è®¢é˜…é“¾æ¥ âš ï¸
# =====================================
[Remote Proxy]
# è®¢é˜…1 = æ‚¨çš„è®¢é˜…é“¾æ¥, udp=true, fast-open=true, vmess-aead=true, enabled=true


# =====================================
# ğŸŸ¢ èŠ‚ç‚¹ç­›é€‰ [Remote Filter] ğŸŸ¢
# =====================================
[Remote Filter]
KR_Filter = NameRegex, FilterKey="^(?=.*((?i)ğŸ‡°ğŸ‡·|éŸ©å›½|éŸ“|é¦–å°”|(\b(KR|KOR|Korea)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
JP_Filter = NameRegex, FilterKey="^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|JPN|Japan)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
SG_Filter = NameRegex, FilterKey="^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|SGP|Singapore)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
UK_Filter = NameRegex, FilterKey = "(?i)(ğŸ‡¬ğŸ‡§|è‹±å›½|UK)" 


# =====================================
# ğŸŸ¢ ç­–ç•¥ç»„ [Proxy Group] ğŸŸ¢
# P3: App ç‹¬äº« Select ç»„ (æ‰‹åŠ¨åˆ‡æ¢å…¥å£)ï¼›P4: AI æœåŠ¡ç²¾ç»†æ‹†åˆ†
# =====================================
[Proxy Group]
# P1. æœ€ç»ˆé«˜å¯ç”¨å…œåº•ç­–ç•¥ (Fallback)
å…œåº•åå¤‡ç­–ç•¥ = fallback, KR_Auto, JP_Auto, SG_Auto, UK_Auto, DIRECT, interval=60, max-timeout=2000, img-url=https://github.com/shindgewongxj/WHATSINStash/raw/main/icon/fallback.png

# P2. å„åœ°åŒºè‡ªåŠ¨ä¼˜é€‰ç­–ç•¥ç»„ (Url-test)
KR_Auto = url-test, KR_Filter, interval=60, tolerance=50, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
JP_Auto = url-test, JP_Filter, interval=60, tolerance=50, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
SG_Auto = url-test, SG_Filter, interval=60, tolerance=50, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
UK_Auto = url-test, UK_Filter, interval=60, tolerance=50, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/UK.png

# P3. ç‹¬ç«‹ App æ‰‹åŠ¨é€‰æ‹©ç­–ç•¥ç»„
Spotify = select, KR_Auto, JP_Auto, SG_Auto, UK_Auto, DIRECT, img-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Spotify_01.png
Telegram = select, KR_Auto, JP_Auto, SG_Auto, UK_Auto, DIRECT, img-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Telegram.png
YouTube = select, SG_Auto, KR_Auto, JP_Auto, UK_Auto, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png
X (Twitter) = select, SG_Auto, KR_Auto, JP_Auto, UK_Auto, DIRECT, img-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Twitter.png
Reddit = select, JP_Auto, KR_Auto, SG_Auto, UK_Auto, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Reddit.png
Instagram = select, JP_Auto, KR_Auto, SG_Auto, UK_Auto, DIRECT, img-url=https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Instagram.png

# P4. AI Services ç‹¬ç«‹ç­–ç•¥ç»„
Google Gemini = select, SG_Auto, UK_Auto, JP_Auto, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google.png
xAI Grok = select, AI_Auto, SG_Auto, UK_Auto, JP_Auto, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Twitter.png
ChatGPT = select, AI_Auto, SG_Auto, UK_Auto, JP_Auto, DIRECT, img-url=https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/ChatGPT.png
AI_Auto = url-test, UK_Filter, interval=60, tolerance=50, img-url=https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/ChatGPT.png

# P5. å›½å†…ç›´è¿ç­–ç•¥ç»„
å¤§é™†ç½‘å€ = select, DIRECT, KR_Auto, JP_Auto, SG_Auto, UK_Auto


# =====================================
# ğŸŸ¢ è§„åˆ™ [Rule] ğŸŸ¢
# ç¡®ä¿ App æµé‡æŒ‡å‘æ­£ç¡®çš„ç‹¬ç«‹ Select ç»„
# =====================================
[Rule]
# P1. æœ¬åœ°æœ€é«˜ä¼˜å…ˆçº§ App åˆ†æµ (PROCESS-NAME)
PROCESS-NAME,Spotify.app,Spotify
PROCESS-NAME,Telegram.app,Telegram
PROCESS-NAME,YouTube.app,YouTube
PROCESS-NAME,X.app,X (Twitter)
PROCESS-NAME,Reddit.app,Reddit
PROCESS-NAME,Instagram.app,Instagram
PROCESS-NAME,Google Gemini.app,Google Gemini
PROCESS-NAME,Grok.app,xAI Grok
PROCESS-NAME,ChatGPT.app,ChatGPT

# P2. æœ¬åœ°æ‹¦æˆªè§„åˆ™
URL-REGEX,\.log\.,REJECT
DOMAIN-SUFFIX,app-measurement.com,REJECT

# P3. æœ€ç»ˆå…œåº•è§„åˆ™
FINAL, å…œåº•åå¤‡ç­–ç•¥


# =====================================
# ğŸŸ¢ è¿œç¨‹è§„åˆ™ [Remote Rule] ğŸŸ¢
# App åŸŸååˆ†æµ Policy æŒ‡å‘ App çš„ç‹¬ç«‹ Select ç»„
# =====================================
[Remote Rule]
# P1. å±€åŸŸç½‘ç›´è¿
https://kelee.one/Tool/Loon/Lsr/LAN_SPLITTER.lsr, policy=DIRECT, tag=LAN, enabled=true

# P2. è¿œç¨‹å¹¿å‘Šæ‹¦æˆª
https://github.com/fmz200/wool_scripts/raw/main/Loon/rule/rejectAd.list, policy=REJECT, tag=å¹¿å‘Šæ‹¦æˆªåˆé›†, enabled=true

# P3. å›½å†…åˆ†æµ
https://kelee.one/Tool/Loon/Lsr/REGION_SPLITTER.lsr, policy=DIRECT, tag=CN REGION, enabled=true

# === P4. å®šåˆ¶ App åŸŸååˆ†æµ (Policy æŒ‡å‘ App çš„ç‹¬ç«‹ Select ç­–ç•¥ç»„) ===
https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Loon/Spotify/Spotify.list, policy=Spotify, tag=Spotify_Domain, enabled=true
https://rule.kelee.one/Loon/Telegram.lsr, policy=Telegram, tag=Telegram_Domain, enabled=true
https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Loon/YouTube/YouTube.list, policy=YouTube, tag=YouTube_Domain, enabled=true
https://github.com/fmz200/wool_scripts/raw/main/Loon/rule/Twitter.list, policy=X (Twitter), tag=Twitter_Domain, enabled=true
https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Loon/Reddit/Reddit.list, policy=Reddit, tag=Reddit_Domain, enabled=true
https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Loon/Instagram/Instagram.list, policy=Instagram, tag=Instagram_Domain, enabled=true
https://kelee.one/Tool/Loon/Lsr/Google_AI.lsr, policy=Google Gemini, tag=Google_Gemini_Domain, enabled=true
https://kelee.one/Tool/Loon/Lsr/Grok.lsr, policy=xAI Grok, tag=xAI_Grok_Domain, enabled=true
https://kelee.one/Tool/Loon/Lsr/ChatGPT.lsr, policy=ChatGPT, tag=ChatGPT_Domain, enabled=true

# P5. å…œåº•æµ·å¤– App åŸŸååˆ†æµ
https://rule.kelee.one/Loon/Global.lsr, policy=å…œåº•åå¤‡ç­–ç•¥, tag=Global_CatchAll, enabled=true


[Host]
iosapps.itunes.apple.com = iosapps.itunes.apple.com.download.ks-cdn.com


[Rewrite]

[Script]

[Remote Script]
https://github.com/fmz200/wool_scripts/raw/main/Loon/script/tasks.scripts, tag=å®šæ—¶ä»»åŠ¡åˆé›†@fmz200, enabled=true
https://github.com/fmz200/wool_scripts/raw/main/Loon/script/tools.scripts, tag=è„šæœ¬å·¥å…·åˆé›†@fmz200, enabled=true


# =====================================
# ğŸŸ¢ æ’ä»¶ [Plugin] - ç»ˆæé›†æˆç‰ˆ ğŸŸ¢
# Policy å·²åŒæ­¥æ›´æ–°åˆ° App ç‹¬äº«ç­–ç•¥ç»„
# =====================================
[Plugin]
# === è„šæœ¬ç®¡ç†å·¥å…·ï¼ˆåŸºç¡€æ¶æ„ï¼‰===
https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.loon.plugin, policy=å…œåº•åå¤‡ç­–ç•¥, enabled=true, tag=BoxJsé…ç½®ä¸­å¿ƒ
https://raw.githubusercontent.com/sub-store-org/Sub-Store/master/config/Loon.plugin, policy=å…œåº•åå¤‡ç­–ç•¥, enabled=true, tag=SubStoreè®¢é˜…ç®¡ç†
https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/modules/script-hub.loon.plugin, policy=å…œåº•åå¤‡ç­–ç•¥, enabled=true, tag=ScriptHubè„šæœ¬ä¸­å¿ƒ

# === å…¨å±€ä¼˜åŒ–/ç³»ç»Ÿå·¥å…· ===
https://raw.githubusercontent.com/fmz200/wool_scripts/raw/main/Loon/plugin/cookies.plugin, policy=DIRECT, enabled=false, tag=CookieæŠ“å–å·¥å…·
https://raw.githubusercontent.com/fmz200/wool_scripts/raw/main/Loon/plugin/Auto_Join_TF.plugin, policy=å…œåº•åå¤‡ç­–ç•¥, enabled=false, tag=TestFlightè‡ªåŠ¨åŠ å…¥
https://raw.githubusercontent.com/Tartarus2014/Loon-Script/refs/heads/master/Plugin/skip-proxy.lpx, policy=DIRECT, enabled=true, tag=å…ä»£ç†é‡å†™æ³¨å…¥
https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/plugin/HTTPDNS.Block.plugin, policy=DIRECT, enabled=true, tag=HTTPDNSåŠ«æŒå±è”½
https://github.com/Moli-X/Tool/raw/X/Loon/Plugin/Kelee/Node_detection_tool.plugin, policy=å…œåº•åå¤‡ç­–ç•¥, enabled=true, tag=èŠ‚ç‚¹æ£€æµ‹å·¥å…·

# === æ ¸å¿ƒå»å¹¿å‘Šä¸è§£é”æ’ä»¶ ===
https://raw.githubusercontent.com/fmz200/wool_scripts/raw/main/Loon/plugin/blockAds.plugin, policy=DIRECT, enabled=true, tag=å…¨å±€ç½‘é¡µå»å¹¿å‘Š
https://raw.githubusercontent.com/fmz200/wool_scripts/raw/main/Loon/plugin/WeChatMiniAds.plugin, policy=DIRECT, enabled=true, tag=å¾®ä¿¡å°ç¨‹åºå»å¹¿å‘Š
https://raw.githubusercontent.com/fmz200/wool_scripts/raw/main/Loon/plugin/weibo.plugin, policy=DIRECT, enabled=true, tag=å¾®åšå¼€å±å»å¹¿å‘Š
https://raw.githubusercontent.com/001ProMax/Surge/main/Loon/Spotify.plugin, policy=Spotify, enabled=true, tag=Spotifyä¼šå‘˜è§£é”
https://gitlab.com/lodepuly/vpn_tool/raw/master/Loon/YouTube.plugin, policy=YouTube, enabled=true, tag=YouTubeå»å¹¿å‘Š/ç”»ä¸­ç”»
https://gitlab.com/lodepuly/vpn_tool/raw/master/Loon/Bilibili.plugin, policy=DIRECT, enabled=true, tag=Bç«™å›½é™…ç‰ˆä¼˜åŒ–
https://raw.githubusercontent.com/fmz200/wool_scripts/raw/main/Loon/plugin/AppStore.plugin, policy=DIRECT, enabled=true, tag=AppStoreä¼˜åŒ–

# === ä¸“é¡¹ App ä¼˜åŒ–æ’ä»¶ ===
https://github.com/Moli-X/Tool/raw/X/Loon/Plugin/Kelee/AliYunDrive_remove_ads.plugin, policy=DIRECT, enabled=true, tag=é˜¿é‡Œäº‘ç›˜ä¼˜åŒ–
https://github.com/Moli-X/Tool/raw/X/Loon/Plugin/Kelee/Taobao_remove_ads.plugin, policy=DIRECT, enabled=true, tag=æ·˜å®å»å¹¿å‘Šä¼˜åŒ–
https://github.com/Moli-X/Tool/raw/X/Loon/Plugin/Kelee/NeteaseCloudMusic_remove_ads.plugin, policy=DIRECT, enabled=true, tag=ç½‘æ˜“äº‘å»å¹¿å‘Š
https://github.com/Moli-X/Tool/raw/X/Loon/Plugin/Kelee/BaiduNetDisk_remove_ads.plugin, policy=DIRECT, enabled=true, tag=ç™¾åº¦ç½‘ç›˜ä¼˜åŒ–


[Remote Rewrite]

[Mitm]
hostname = -www.google.com
ca-p12 = 
ca-passphrase = 
skip-server-cert-verify = false
