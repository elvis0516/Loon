# ====================================================================================
# Loon å®šåˆ¶é«˜å¯ç”¨é…ç½® V15 æœ€ç»ˆå®Œæ•´ä¼˜åŒ–ç‰ˆ - ä½œè€…ï¼šUee&AI
# æ ¸å¿ƒç›®æ ‡ï¼šæœ€é«˜ App å…¼å®¹æ€§ (å…³é—­ MitM)ï¼Œä¼˜åŒ–å¤šåœ°åŒºèŠ‚ç‚¹åˆ†æµ
# ====================================================================================

[General]
ip-mode = v4-only
ipv6-vif = off
dns-server = system
sni-sniffing = true
disable-stun = true
dns-reject-mode = LoopbackIP
domain-reject-mode = DNS
udp-fallback-mode = REJECT
wifi-access-http-port = 7222
wifi-access-socks5-port = 7221
allow-wifi-access = false
test-timeout = 5
disconnect-on-policy-change = false
internet-test-url = http://connectivitycheck.platform.hicloud.com/generate_204
proxy-test-url = http://www.gstatic.com/generate_204
geoip-url = https://geodata.kelee.one/Country-Masaiki.mmdb
ipasn-url = https://geodata.kelee.one/GeoLite2-ASN-P3TERX.mmdb
# å›¾æ ‡ä¿®å¤/ç›´è¿ä¼˜åŒ–
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,e.crashlynatics.com,raw.githubusercontent.com,github.com
bypass-tun = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32


[Proxy]
# âš ï¸ æ­¤å¤„ä¸º Loon è‡ªåŠ¨ç”Ÿæˆçš„æœ¬åœ°èŠ‚ç‚¹åˆ—è¡¨ï¼Œè¯·ä¿æŒåŸæ ·ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ âš ï¸


# ====================================================================================
# ğŸŸ¢ èŠ‚ç‚¹è®¢é˜… [Remote Proxy] ğŸŸ¢
# ====================================================================================
[Remote Proxy]

ç½‘æ˜“è§£é” = https://gist.githubusercontent.com/As-Lucky/13292a5f2f36105951d4e19983f35a1d/raw/ad99f7dab6f23005366dc1a56bc51075bc131521/Wyy,parser-enabled = true,udp=true,block-quic=true,fast-open=true,vmess-aead=true,skip-cert-verify=default,enabled=true,flexible-sni=false
# è®¢é˜…1 = æ‚¨çš„è®¢é˜…é“¾æ¥, udp=true, fast-open=true, vmess-aead=true, enabled=true


# ====================================================================================
# ğŸŸ¢ èŠ‚ç‚¹ç­›é€‰ [Remote Filter] - æ–°å¢ TW/HK/US/Other ğŸŸ¢
# âš ï¸ æ³¨æ„ï¼šæ‚¨ä»éœ€åœ¨ Loon App çš„ [ç­›é€‰ (Filter)] ç•Œé¢åˆ›å»ºå¹¶é…ç½®è¿™äº›åˆ—è¡¨ âš ï¸
# ====================================================================================
[Remote Filter]
KR_Filter = NameRegex, FilterKey = "^(?=.*((?i)ğŸ‡°ğŸ‡·|éŸ©å›½|éŸ“|é¦–å°”|(\b(KR|KOR|Korea)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
JP_Filter = NameRegex, FilterKey = "^(?=.*((?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|(\b(JP|JPN|Japan)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
SG_Filter = NameRegex, FilterKey = "^(?=.*((?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®|(\b(SG|SGP|Singapore)(\d+)?\b)))(?!.*((?i)å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|(\b(GAME)\b))).*$"
UK_Filter = NameRegex, FilterKey = "(?i)(ğŸ‡¬ğŸ‡§|è‹±å›½|UK)"
TW_Filter = NameRegex, FilterKey = "(?i)(ğŸ‡¹ğŸ‡¼|å°æ¹¾|è‡º|TW)"
HK_Filter = NameRegex, FilterKey = "(?i)(ğŸ‡­ğŸ‡°|é¦™æ¸¯|HK|é¦™|å»£)"
US_Filter = NameRegex, FilterKey = "(?i)(ğŸ‡ºğŸ‡¸|ç¾å›½|ç¾|US|USA)"
Other_Filter = NameRegex, FilterKey = "(?i)(å°åº¦|å·´è¥¿|åœŸè€³å…¶|ä¿„|é˜¿æ ¹å»·|å—é|TR|BR|IN|RU)" # éå¸¸ç”¨åœ°åŒº


# ====================================================================================
# ğŸŸ¢ ç­–ç•¥ç»„ [Proxy Group] - æ ¸å¿ƒä¼˜åŒ–åŒºåŸŸ ğŸŸ¢
# ====================================================================================
[Proxy Group]
# P2. å„åœ°åŒºè‡ªåŠ¨ä¼˜é€‰ç­–ç•¥ç»„ (Url-test)
TW_Auto = url-test,TW_Filter,interval = 60,tolerance = 50,img-url = https://raw.githubusercontent.com/luestr/IconResource/main/Country_Icon/tw.png
HK_Auto = url-test,HK_Filter,interval = 60,tolerance = 50,img-url = https://raw.githubusercontent.com/luestr/IconResource/main/Country_Icon/hk.png
US_Auto = url-test,US_Filter,interval = 60,tolerance = 50,img-url = https://raw.githubusercontent.com/luestr/IconResource/main/Country_icon/us.png
KR_Auto = url-test,KR_Filter,interval = 60,tolerance = 50,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png
JP_Auto = url-test,JP_Filter,interval = 60,tolerance = 50,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
SG_Auto = url-test,SG_Filter,interval = 60,tolerance = 50,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
UK_Auto = url-test,UK_Filter,interval = 60,tolerance = 50,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/UK.png
Other_Auto = url-test,Other_Filter,interval = 60,tolerance = 50,img-url = https://raw.githubusercontent.com/luestr/IconResource/main/Country_Icon/Others.png # éå¸¸ç”¨åœ°åŒºä¼˜é€‰

# P1. æœ€ç»ˆé«˜å¯ç”¨å…œåº•ç­–ç•¥ (Fallback)
å…œåº•åå¤‡ç­–ç•¥ = fallback,HK_Auto,TW_Auto,US_Auto,KR_Auto,JP_Auto,SG_Auto,UK_Auto,Other_Auto,DIRECT,interval = 60,max-timeout = 2000,img-url = https://github.com/shindgewongxj/WHATSINStash/raw/main/icon/fallback.png


# P4. AI Services ç‹¬ç«‹ç­–ç•¥ç»„
AI_Auto = url-test,US_Auto,UK_Auto,SG_Auto,JP_Auto,HK_Auto,TW_Auto,Other_Auto,interval = 60,tolerance = 50,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Bot.png

Google Gemini = select,AI_Auto,US_Auto,DIRECT,img-url = https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/GoogleGemini.png
xAI Grok = select,AI_Auto,US_Auto,DIRECT,img-url = https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/Grok.png
ChatGPT = select,AI_Auto,US_Auto,DIRECT,img-url = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/ChatGPT.png


# P3. ç‹¬ç«‹ App æ‰‹åŠ¨é€‰æ‹©ç­–ç•¥ç»„
TikTok = select,TW_Auto,HK_Auto,SG_Auto,JP_Auto,KR_Auto,UK_Auto,DIRECT,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/TikTok.png
Spotify = select,KR_Auto,JP_Auto,SG_Auto,UK_Auto,DIRECT,img-url = https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Spotify_01.png
Telegram = select,KR_Auto,JP_Auto,SG_Auto,UK_Auto,DIRECT,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/Telegram.png
YouTube = select,US_Auto,TW_Auto,HK_Auto,SG_Auto,KR_Auto,JP_Auto,UK_Auto,DIRECT,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png
X (Twitter) = select,US_Auto,SG_Auto,KR_Auto,JP_Auto,UK_Auto,DIRECT,img-url = https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Twitter.png
Reddit = select,US_Auto,JP_Auto,KR_Auto,SG_Auto,UK_Auto,DIRECT,img-url = https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/Reddit.png
Instagram = select,US_Auto,JP_Auto,KR_Auto,SG_Auto,UK_Auto,DIRECT,img-url = https://raw.githubusercontent.com/fmz200/wool_scripts/main/icons/apps/Instagram.png

# P5. å›½å†…ç›´è¿ç­–ç•¥ç»„
å¤§é™†ç½‘å€ = select,DIRECT,HK_Auto,TW_Auto,KR_Auto,JP_Auto,SG_Auto,UK_Auto,img-url = https://raw.githubusercontent.com/Orz-3/mini/master/Color/CN.png


# ====================================================================================
# ğŸŸ¢ è§„åˆ™ [Rule] - ä¿æŒä¸å˜ ğŸŸ¢
# ====================================================================================
[Rule]
# P1. æœ¬åœ°æœ€é«˜ä¼˜å…ˆçº§ App è¿›ç¨‹åˆ†æµ
PROCESS-NAME,TikTok.app,TikTok 
PROCESS-NAME,Spotify.app,Spotify
PROCESS-NAME,Telegram.app,Telegram
PROCESS-NAME,YouTube.app,YouTube
PROCESS-NAME,X.app,X (Twitter)
PROCESS-NAME,Reddit.app,Reddit
PROCESS-NAME,Instagram.app,Instagram
PROCESS-NAME,Google Gemini.app,Google Gemini
PROCESS-NAME,Grok.app,xAI Grok
PROCESS-NAME,ChatGPT.app,ChatGPT

# ğŸ¯ ä¼˜å…ˆçº§ 2: æ ¸å¿ƒ AI æœåŠ¡åŸŸååˆ†æµ
DOMAIN-SUFFIX,googleapis.com,Google Gemini
DOMAIN-SUFFIX,gemini.com,Google Gemini
DOMAIN-SUFFIX,x.ai,xAI Grok
DOMAIN-SUFFIX,api.twitter.com,xAI Grok
DOMAIN-SUFFIX,openai.com,ChatGPT
DOMAIN-SUFFIX,auth0.com,ChatGPT
DOMAIN-SUFFIX,sentry.io,ChatGPT

# ğŸ¯ ä¼˜å…ˆçº§ 3: Google åŸºç¡€æœåŠ¡åˆ†æµ
DOMAIN-SUFFIX,google.com,US_Auto
DOMAIN-SUFFIX,googleusercontent.com,US_Auto
DOMAIN-SUFFIX,googlevideo.com,YouTube

# P4. æœ¬åœ°æ‹¦æˆªè§„åˆ™
PROCESS-NAME,YouTube.app,REJECT,PROTOCOL=QUIC
URL-REGEX,"\.log\.",REJECT
DOMAIN-SUFFIX,app-measurement.com,REJECT

# P5. æœ€ç»ˆå…œåº•è§„åˆ™
FINAL,å…œåº•åå¤‡ç­–ç•¥


# ====================================================================================
# ğŸŸ¢ è¿œç¨‹è§„åˆ™ [Remote Rule] - ä¿æŒä¸å˜ ğŸŸ¢
# ====================================================================================
[Remote Rule]
# P1. å±€åŸŸç½‘ç›´è¿
https://kelee.one/Tool/Loon/Lsr/LAN_SPLITTER.lsr, policy=DIRECT, tag=LAN, enabled=true
# P2. è¿œç¨‹å¹¿å‘Šæ‹¦æˆª
https://github.com/fmz200/wool_scripts/raw/main/Loon/rule/rejectAd.list, policy=REJECT, tag=å¹¿å‘Šæ‹¦æˆªåˆé›†, enabled=true
# P3. å›½å†…åˆ†æµ
https://kelee.one/Tool/Loon/Lsr/REGION_SPLITTER.lsr, policy=DIRECT, tag=CN REGION, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/BiliBili/BiliBili.list, policy=DIRECT, tag=BiliBili_Domain, enabled=true
# === P4. å®šåˆ¶ App åŸŸååˆ†æµ (Policy æŒ‡å‘ App çš„ç‹¬ç«‹ Select ç­–ç•¥ç»„) ===
https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Loon/TikTok/TikTok.list, policy=TikTok, tag=TikTok_Domain, enabled=true
https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Loon/Spotify/Spotify.list, policy=Spotify, tag=Spotify_Domain, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Telegram/Telegram.list, policy=Telegram, tag=Telegram_Domain, enabled=true
https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Loon/YouTube/YouTube.list, policy=YouTube, tag=YouTube_Domain, enabled=true
https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Loon/Twitter/Twitter.list, policy=X (Twitter), tag=Twitter_Domain, enabled=true
https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Loon/Reddit/Reddit.list, policy=Reddit, tag=Reddit_Domain, enabled=true
https://github.com/blackmatrix7/ios_rule_script/raw/master/rule/Loon/Instagram/Instagram.list, policy=Instagram, tag=Instagram_Domain, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/Gemini/Gemini.list, policy=Google Gemini, tag=Google_Gemini_Domain, enabled=true
https://kelee.one/Tool/Loon/Lsr/Grok.lsr, policy=xAI Grok, tag=xAI_Grok_Domain, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Loon/OpenAI/OpenAI.list, policy=ChatGPT, tag=ChatGPT_Domain, enabled=true
# P5. å…œåº•æµ·å¤– App åŸŸååˆ†æµ
https://rule.kelee.one/Loon/Global.lsr, policy=å…œåº•åå¤‡ç­–ç•¥, tag=Global_CatchAll, enabled=true


[Host]
iosapps.itunes.apple.com = iosapps.itunes.apple.com.download.ks-cdn.com


[Rewrite]

[Script]

[Remote Script]
https://github.com/fmz200/wool_scripts/raw/main/Loon/script/tasks.scripts, tag=å®šæ—¶ä»»åŠ¡åˆé›†@fmz200, enabled=true
https://github.com/fmz200/wool_scripts/raw/main/Loon/script/tools.scripts, tag=è„šæœ¬å·¥å…·åˆé›†@fmz200, enabled=true


# ====================================================================================
# ğŸŸ¢ æ’ä»¶ [Plugin] - ä¿æŒåŸæ ·ï¼Œä½†ä¾èµ– MitM çš„æ’ä»¶å°†æš‚æ—¶å¤±æ•ˆ ğŸŸ¢
# ====================================================================================
[Plugin]
https://kelee.one/Tool/Loon/Lpx/Block_HTTPDNS.lpx, enabled=true
https://kelee.one/Tool/Loon/Lpx/BlockAdvertisers.lpx, enabled=true
# === è„šæœ¬ç®¡ç†å·¥å…·ï¼ˆåŸºç¡€æ¶æ„ï¼‰===
https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.loon.plugin, policy=å…œåº•åå¤‡ç­–ç•¥, tag=BoxJsé…ç½®ä¸­å¿ƒ, enabled=true
https://raw.githubusercontent.com/sub-store-org/Sub-Store/master/config/Loon.plugin, policy=å…œåº•åå¤‡ç­–ç•¥, tag=SubStoreè®¢é˜…ç®¡ç†, enabled=true
https://raw.githubusercontent.com/Script-Hub-Org/Script-Hub/main/modules/script-hub.loon.plugin, policy=å…œåº•åå¤‡ç­–ç•¥, tag=ScriptHubè„šæœ¬ä¸­å¿ƒ, enabled=true
http://script.hub/file/_start_/https://github.com/fmz200/wool_scripts/raw/main/QuantumultX/rewrite/rewrite.snippet/_end_/rewrite.plugin?type=qx-rewrite&target=loon-plugin&del=true&jqEnabled=true, enabled=false
# === å…¨å±€ä¼˜åŒ–/ç³»ç»Ÿå·¥å…· ===
https://raw.githubusercontent.com/Tartarus2014/Loon-Script/refs/heads/master/Plugin/skip-proxy.lpx, policy=DIRECT, tag=å…ä»£ç†é‡å†™æ³¨å…¥, enabled=true
https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/plugin/HTTPDNS.Block.plugin, policy=DIRECT, tag=HTTPDNSåŠ«æŒå±è”½, enabled=true
https://github.com/Moli-X/Tool/raw/X/Loon/Plugin/Kelee/Node_detection_tool.plugin, policy=å…œåº•åå¤‡ç­–ç•¥, tag=èŠ‚ç‚¹æ£€æµ‹å·¥å…·, enabled=true
https://kelee.one/Tool/Loon/Lpx/Reddit_remove_ads.lpx, enabled=true
http://script.hub/file/_start_/https://raw.githubusercontent.com/app2smile/rules/master/module/spotify.conf/_end_/spotify.plugin?type=qx-rewrite&target=loon-plugin&del=true&jqEnabled=true, img-url=https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/Spotify.png, enabled=true
http://script.hub/file/_start_/https://whatshub.top/rewrite/CamScanner.conf/_end_/CamScanner.plugin?type=qx-rewrite&target=loon-plugin&del=true&jqEnabled=true, enabled=true
https://raw.githubusercontent.com/deezertidal/private/master/plugallery/CamScanner.plugin, enabled=false
http://script.hub/file/_start_/https://raw.githubusercontent.com/WeiGiegie/666/main/ximalayajisuban.js/_end_/ximalayajisuban.plugin?type=qx-rewrite&target=loon-plugin&del=true&jqEnabled=true, tag=å–œé©¬æ‹‰é›…æé€Ÿç‰ˆ, img-url=https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/Himalaya.png, enabled=true
https://raw.githubusercontent.com/deezertidal/private/master/plugallery/jianxun.plugin, enabled=true
http://script.hub/file/_start_/https://raw.githubusercontent.com/WeiGiegie/666/main/keep.js/_end_/keep.plugin?type=qx-rewrite&target=loon-plugin&del=true&jqEnabled=true, img-url=https://raw.githubusercontent.com/luestr/IconResource/main/App_icon/120px/Keep.png, enabled=true
https://kelee.one/Tool/Loon/Lpx/YouTube_remove_ads.lpx, enabled=true 
https://kelee.one/Tool/Loon/Lpx/Weixin_Official_Accounts_remove_ads.lpx, enabled=true
https://kelee.one/Tool/Loon/Lpx/Weixin_external_links_unlock.lpx, enabled=true
https://kelee.one/Tool/Loon/Lpx/WexinMiniPrograms_Remove_ads.lpx, enabled=true
# === æ ¸å¿ƒå»å¹¿å‘Šä¸è§£é”æ’ä»¶ ===
# === ä¸“é¡¹ App ä¼˜åŒ–æ’ä»¶ ===
https://github.com/Moli-X/Tool/raw/X/Loon/Plugin/Kelee/Taobao_remove_ads.plugin, policy=DIRECT, tag=æ·˜å®å»å¹¿å‘Šä¼˜åŒ–, enabled=false


[Remote Rewrite]

[Mitm]
ca-p12 = 
ca-passphrase = 4P5CL619
# ğŸ¯ æ ¸å¿ƒä¼˜åŒ–ï¼šhostname ç•™ç©ºï¼Œæœ€é«˜å…¼å®¹æ€§æ¨¡å¼
hostname = 
skip-server-cert-verify = false
